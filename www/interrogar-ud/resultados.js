var translations = {
	'Limpar expressão de busca': {
		'en-US': 'Clear query expression'
	},
	'Número do token na sentença': {
		'en-US': ''
	},
	'Forma da palavra': {
		'en-US': ''
	},
	'Lema da palavra': {
		'en-US': ''
	},
	'Classe gramatical': {
		'en-US': ''
	},
	'Classe gramatical específica': {
		'en-US': ''
	},
	'Atributos morfológicos': {
		'en-US': ''
	},
	'Número do token do qual é dependente sintaticamente': {
		'en-US': ''
	},
	'Relação de dependência': {
		'en-US': ''
	},
	'Relação de dependência específica': {
		'en-US': ''
	},
	'Miscelânea': {
		'en-US': ''
	},
	'Ir para interface': {
		'en-US': ''
	},
	'Token/palavra que será avaliado nesta condição': {
		'en-US': ''
	},
	'Token principal': {
		'en-US': ''
	},
	'Pai do token': {
		'en-US': ''
	},
	'Token à direita': {
		'en-US': ''
	},
	'Token à esquerda': {
		'en-US': ''
	},
	'Anotação que será avaliada': {
		'en-US': ''
	},
	'Relação de dependência sintática': {
		'en-US': ''
	},
	'Dependência específica': {
		'en-US': ''
	},
	'Frase completa': {
		'en-US': ''
	},
	'ID da sentença no corpus': {
		'en-US': ''
	},
	'Forma de avaliação da anotação selecionada': {
		'en-US': ''
	},
	'Igual': {
		'en-US': ''
	},
	'Diferente': {
		'en-US': ''
	},
	'Valor que a anotação selecionada deve conter': {
		'en-US': ''
	},
	'Adjetivo': {
		'en-US': ''
	},
	'Preposição': {
		'en-US': ''
	},
	'Advérbio': {
		'en-US': ''
	},
	'Auxiliar': {
		'en-US': ''
	},
	'Conjunção coordenativa': {
		'en-US': ''
	},
	'Determinante': {
		'en-US': ''
	},
	'Interjeição': {
		'en-US': ''
	},
	'Substantivo': {
		'en-US': ''
	},
	'Numeral': {
		'en-US': ''
	},
	'Partícula': {
		'en-US': ''
	},
	'Pronome': {
		'en-US': ''
	},
	'Nome próprio': {
		'en-US': ''
	},
	'Pontuação': {
		'en-US': ''
	},
	'Conjunção subordinativa': {
		'en-US': ''
	},
	'Adicionar esta condição à barra de busca (Atalho: Enter)': {
		'en-US': ''
	},
	'Adicionar condição com o token em negrito': {
		'en-US': ''
	},
	'Busca salva': {
		'en-US': ''
	},
	'Busca rápida': {
		'en-US': ''
	},
	'Interrogatório - Ambiente de busca e revisão de corpora anotados': {
		'en-US': ''
	},
	'nova busca': {
		'en-US': ''
	},
	'buscas salvas': {
		'en-US': ''
	},
	'gerenciar corpora': {
		'en-US': ''
	},
	'Expressão de busca:': {
		'en-US': ''
	},
	'Buscas simples com expressão regular podem ser realizadas digitando as palavras na barra de busca. Para buscas complexas, é necessário digitar o critério de busca e seus parâmetros, conforme instruções no quadro à direita.': {
		'en-US': ''
	},
	'Voltar à busca normal': {
		'en-US': ''
	},
	'Baixe o <a target="_blank" download="" href="../interrogar-ud/scripts/modelo_query.txt">modelo de script de busca</a> em Python.': {
		'en-US': ''
	},
	'Edite-o de modo a encontrar as frases pretendidas.': {
		'en-US': ''
	},
	'Submeta o script de busca navegando até o arquivo editado ou arraste-o até o botão abaixo.': {
		'en-US': ''
	},
	'Lembre-se de renomear o script de modo que especifique o que está sendo buscado.': {
		'en-US': ''
	},
	'Script de busca:': {
		'en-US': ''
	},
	'Corpus:': {
		'en-US': ''
	},
	'A busca não será salva no sistema, mas você poderá salvá-la posteriormente caso julgue que teve bons resultados.': {
		'en-US': ''
	},
	'Salvar resultados da busca': {
		'en-US': ''
	},
	'A busca será salva no sistema, e você poderá acessá-la posteriormente na página de interrogações recentes.': {
		'en-US': ''
	},
	'Visualizar distribuição': {
		'en-US': ''
	},
	'Selecione para visualizar a distribuição das ocorrências que são resultado da sua expressão de busca entre as diferentes categorias de anotação.': {
		'en-US': ''
	},
	'Nome da busca': {
		'en-US': ''
	},
	'Visualizar distribuição de:': {
		'en-US': ''
	},
	'Para habilitar a visualização da distribuição de alguma anotação, utilize o <a href="#criterio_5" criterio="5" class="toggleCriteria">critério 5: Python</a> ou o <a href="#interactive" criterio="0" class="toggleCriteria">construtor de expressões de busca</a>.': {
		'en-US': ''
	},
	'Bem-vindo(a) ao Interrogatório,<br>ambiente de busca e revisão de corpora anotados': {
		'en-US': ''
	},
	'Visite o <a href="../cgi-bin/arquivo_ud.cgi">Repositório dos corpora</a> para subir um novo corpus ou consultar os existentes.': {
		'en-US': ''
	},
	'Para começar a interrogar algum corpus, siga um dos caminhos abaixo:': {
		'en-US': ''
	},
	'Buscas simples: Digite as palavras na barra de busca à esquerda.': {
		'en-US': ''
	},
	'Buscas complexas: <a title="Ir para interface" href="#interactive" criterio="0" class="translateTitle toggleCriteria">Construa expressões de busca interativamente</a>': {
		'en-US': ''
	},
	'Para experientes: Utilize algum dos critérios de busca': {
		'en-US': ''
	},
	'Critério 1: Regex': {
		'en-US': ''
	},
	'Critério 2: Ausência de B apontando para A': {
		'en-US': ''
	},
	'Critério 3: Regex Independentes': {
		'en-US': ''
	},
	'Critério 4: Pais e filhos': {
		'en-US': ''
	},
	'Critério 5: Python': {
		'en-US': ''
	},
	'Para experts: <a title="Abrir interface" style="cursor:pointer;" onclick="$(\'.queryString\').hide(); $(\'.scriptQuery\').show(); $(\'.toggleSalvar\').click(); ">Escreva seu próprio script de busca</a>': {
		'en-US': ''
	},
	'Atualizações': {
		'en-US': ''
	},
	'O sistema de filtrar sentenças foi totalmente reformulado': {
		'en-US': ''
	},
	'Quando possível, "Mostrar contexto" permite a leitura de todas as sentenças': {
		'en-US': ''
	},
	'Links úteis': {
		'en-US': ''
	},
	'Repositório dos corpora': {
		'en-US': ''
	},
	'Relatório de inquéritos finalizados': {
		'en-US': ''
	},
	'Julgamento - avaliação de corpora anotados': {
		'en-US': ''
	},
	'Código fonte do Interrogatório no Github': {
		'en-US': ''
	},
	'Grupo de pesquisa ComCorHd/PUC-Rio': {
		'en-US': ''
	},
	'Construtor de expressões de busca': {
		'en-US': ''
	},
	'Quero procurar por:': {
		'en-US': ''
	},
	'cujo(a)': {
		'en-US': ''
	},
	'seja': {
		'en-US': ''
	},
	' a ': {
		'en-US': ''
    },
    ' de ': {
		'en-US': ''
	},
	'Como funciona?': {
		'en-US': ''
	},
	'Você pode adicionar uma ou mais <b>condições</b> para a sua busca. As condições são feitas envolvendo um <b>token</b> (ou palavra) principal, seu "pai" sintático (palavra do qual o token depende sintaticamente), um token à direita, e/ou um token à esquerda do token principal.': {
		'en-US': ''
	},
	'Uma ou mais <b>anotações</b> gramaticais podem ser verificadas desse(s) token(s), de modo que devem ser <b>iguais</b> ou <b>diferentes</b> de um <b>valor</b>. Todos os valores podem ser preenchidos com <a target="_blank" href="http://aprenda.vidageek.net/aprenda/regex">expressão regular</a>.': {
		'en-US': ''
	},
	'Ao clicar no botão <b>OK</b> ou pressionar <b>Enter</b>, a condição será adicionada à barra de busca à esquerda adaptada para o <a href="#criterio_5">critério 5: Python</a>. Adicione quantas condições julgar necessário.': {
		'en-US': ''
    },
    'Você pode especificar qual token será negritado nas frases clicando no ícone de arroba (<b>@</b>). Caso não especifique nenhum token, o último da expressão de busca será o escolhido. O token negritado, além de se destacar na leitura de uma frase, é o que será avaliado caso deseje <a style="cursor:pointer" onclick="$(\'.toggleDist\').click()">ver a distribuição</a> de alguma anotação para este token.': {
		'en-US': ''
	},
	'Para consultar as categorias do Universal Dependencies, veja <a target="_blank" href="https://universaldependencies.org/u/pos/index.html">part-of-speech</a>, <a target="_blank" href="https://universaldependencies.org/u/feat/index.html">features</a> e <a target="_blank" href="https://universaldependencies.org/u/dep/index.html">dependency relation</a>.': {
		'en-US': ''
	},
	'Se a expressão regular for encontrada em alguma sentença, retorná-la.': {
		'en-US': ''
	},
	'Dica: Cada grupo da expressão regular (conjunto entre parênteses) será mostrado com uma cor diferente.': {
		'en-US': ''
	},
	'Dica 2: Em um arquivo no formato CoNLL-U, "\\t" separa as colunas, e "\\n", as palavras.': {
		'en-US': ''
	},
	'Exemplos:': {
		'en-US': ''
	},
	'1) Retornar sentenças com o lema "dizer" seguido de um "PROPN".': {
		'en-US': ''
	},
	'2) Retornar sentenças com substantivos seguidos ou não de adjetivos, além de um nome próprio que seja aposto.': {
		'en-US': ''
	},
	'3) Retornar sentenças com tokens cujo POS seja "NUM" e o DEPREL, diferente de "nummod".': {
		'en-US': ''
	},
	'Se em uma sentença tiver um token marcado como A na coluna X e não tiver nenhum outro token com valor B na coluna Y apontando para A, retornar a sentença.': {
		'en-US': ''
	},
	'Parâmetros: A#X#B#Y': {
		'en-US': ''
	},
	"Dica: O parâmetro B aceita o operador lógico '|' (ou).": {
		'en-US': ''
	},
	"1) Retornar sentenças em que o 'root' não tenha nenhum 'nsubj' ou 'csubj' apontando para ele.": {
		'en-US': ''
	},         'Verifica se várias expressões regulares dão match em uma sentença e a retorna caso nenhuma das expressões falhe.': {
		'en-US': ''
	},
	'Parâmetros:': {
		'en-US': ''
	},
	"Dica: Utilize '!' para negar uma expressão regular.": {
		'en-US': ''
	},
	"1) Procurar por sentenças em que o 'root' seja 'VERB', e que não tenham nenhum 'nsubj' nem 'csubj'.": {
		'en-US': ''
	},   'Busca relações sintáticas entre filhos (regex 1) e pais (regex 2).': {
		'en-US': ''
	},
	"Dica: Utilize '!' para negar a presença de um filho ou de um pai.": {
		'en-US': ''
	},
	'1) Procurar por sentenças em que uma palavra com classe "NOUN" que também é sujeito esteja apontando para um "ADV".': {
		'en-US': ''
	},
	'Realiza uma condição seguindo a sintaxe em Python.': {
		'en-US': ''
	},
	'Você também pode utilizar o <a href="#interactive">construtor de expressões de busca</a> para montar a sua sintaxe com o critério 5.': {
		'en-US': ''
	},
	'Uma ou mais condições que conta com anotações de um token/palavra, um operador (== ou !=), e um valor entre aspas.': {
		'en-US': ''
	},
	'São anotações de um token:': {
		'en-US': ''
	},
	'id, word, lemma, upos, xpos, feats, dephead, deprel, deps, misc, head_token, next_token, previous_token, sent_id e text': {
		'en-US': ''
	},
	'Opcional: Utilize um "@" para indicar qual token deve ser negritado.': {
		'en-US': ''
	},
	'Dica: Todos os valores de uma condição são uma expressão regular (regex).': {
		'en-US': ''
	},
	'1) Procurar por tokens "é" que sejam AUX, mas cujos pais não sejam VERB (negrito no pai).': {
		'en-US': ''
	},
	'Para mais exemplos, veja o <a target="_blank" href="../cgi-bin/expressoes_5.cgi">banco de expressões do critério 5: Python</a>.': {
		'en-US': ''
	},
	'Voltar ao topo': {
		'en-US': ''
	},
	'undefined': {
		'en-US': ''
	},
	'Apagar interrogação': {
		'en-US': ''
	},
	'Realizar filtro': {
		'en-US': ''
	},
	'Buscas salvas: Interrogatório': {
		'en-US': ''
	},
	'Filtrar buscas:': {
		'en-US': ''
	},
	'Tudo': {
		'en-US': ''
	},
	'Nome': {
		'en-US': ''
	},
	'Critério de busca': {
		'en-US': ''
	},
	'Expressão de busca': {
		'en-US': ''
	},
	'CoNLL-U': {
		'en-US': ''
	},
	'Data': {
		'en-US': ''
	},
	'Buscas:': {
		'en-US': ''
	},
	'excluir': {
		'en-US': ''
	},
	'Anotar e submeter': {
		'en-US': ''
	},
	'Submeter corpus anotado': {
		'en-US': ''
	},
	'Apagar arquivo': {
		'en-US': ''
	},
	'Escolher arquivo': {
		'en-US': ''
	},
	'Repositório: Interrogatório': {
		'en-US': ''
	},
	'Repositório': {
		'en-US': ''
	},
	'Atenção: considere enviar um corpus pelo <a style="color:yellow" href="https://github.com/alvelvis/Julgamento">Julgamento</a> para liberar funções extras da ET.': {
		'en-US': ''
	},
	'Para alimentar o repositório:': {
		'en-US': ''
	},
	'Envie um arquivo anotado no formato <a target="_blank" href="https://universaldependencies.org/format.html">CoNLL-U</a> para começar a interrogá-lo.': {
		'en-US': ''
	},
	'Você também pode enviar um arquivo em formato de texto plano para ser processado por um <a title="UDPipe" href="http://ufal.mff.cuni.cz/udpipe" target="_blank">anotador automático</a> treinado em <a title="Bosque-UD" href="https://github.com/UniversalDependencies/UD_Portuguese-Bosque" target="_blank">língua portuguesa</a>.': {
		'en-US': ''
	},
	'Selecione o arquivo ou arraste-o para o botão abaixo:': {
		'en-US': ''
	},
	'sentenças': {
		'en-US': ''
	},
	'validar': {
		'en-US': ''
	},
	' -- escolha um corpus -- ': {
		'en-US': ''
	},
	'Voltar': {
		'en-US': ''
	},
	'Para realizar filtros na página, é preciso salvar esta busca; clique aqui para salvar': {
		'en-US': ''
	},
	'Refazer busca': {
		'en-US': ''
	},
	'Baixar corpus': {
		'en-US': ''
	},
	'Escolha quantas sentenças deseja selecionar': {
		'en-US': ''
	},
	'Abrir inqueritos': {
		'en-US': ''
	},
	'Simular alterações': {
		'en-US': ''
	},
	'Filtrar': {
		'en-US': ''
	},
	'Baixar arquivo': {
		'en-US': ''
	},
	'Mostrar contexto': {
		'en-US': 'Show context'
	},
	'Mostrar anotação': {
		'en-US': ''
	},
	'Mostrar opções': {
		'en-US': ''
	},
	'Abrir inquérito': {
		'en-US': ''
	},
	'Você deseja': {
		'en-US': ''
	},
	'Opções': {
		'en-US': ''
	},
	'Abrir inquérito para múltiplas sentenças': {
		'en-US': ''
	},
	'De:': {
		'en-US': ''
	},
	'Até:': {
		'en-US': ''
	},
	'': {
		'en-US': ''
	},
	'Abrir anotação de todas as sentenças': {
		'en-US': ''
	},
	'Fechar anotação de todas as sentenças': {
		'en-US': ''
	},
	'Correção em lote': {
		'en-US': ''
	},
	'A correção em lote permite modificar todas ou parte das sentenças do corpus com um script escrito na sintaxe do <a target="_blank" href="../cgi-bin/expressoes_5.cgi">critério 5: Python</a>.': {
		'en-US': ''
	},
	'Antes de efetivar mudanças, você será levado a uma tela de simulação de alterações.': {
		'en-US': ''
	},
	'Baixe o <a href="../interrogar-ud/scripts/modelo_script.txt" target="_blank" download="">modelo de script de correção</a> em Python.': {
		'en-US': ''
	},
	'Edite o script de correção de acordo com o exemplo dentro do arquivo.': {
		'en-US': ''
	},
	'Escolha um nome para o tipo de correção que está propondo e submeta sua versão editada do script abaixo.': {
		'en-US': ''
	},
	'Dê um nome à correção:': {
		'en-US': ''
	},
	'Navegue até o arquivo editado ou arraste-o até o botão:': {
		'en-US': ''
	},
	'A opção de filtrar retira frases dessa página e as coloca em uma página à parte, com um nome que você decidir.': {
		'en-US': ''
	},
	'Para adicionar frases a um filtro já existente, basta escolher o mesmo nome para o filtro.': {
		'en-US': ''
	},
	'Você pode realizar filtros de duas formas:': {
		'en-US': ''
	},
	'Filtrar com uma nova expressão de busca': {
		'en-US': ''
	},
	'Filtrar as frases que foram selecionadas manualmente': {
		'en-US': ''
	},
	'Filtrar com nova busca': {
		'en-US': ''
	},
	'Expressão de busca (?):<span class="tooltiptext">As sentenças serão removidas da página atual e salvas em uma página separada. Se for do desejo, é possível retornar à busca original posteriormente.<br><br>Sintaxe: nº do critério + espaço + parâmetros</span>': {
		'en-US': ''
	},
	'Nome do filtro (opcional):': {
		'en-US': ''
	},
	'Filtrar frases selecionadas': {
		'en-US': ''
	},
	'Nome do arquivo (sem <em>.conllu</em>):': {
		'en-US': ''
	},
	'Anotar frase com o UDPipe': {
		'en-US': ''
	},
	'Visualizar árvore de dependências': {
		'en-US': ''
	},
	'acabaram as sentenças': {
		'en-US': ''
	},
	'Selecionar sentença para filtragem': {
		'en-US': ''
	},
	'Selecionar múltiplas sentenças': {
		'en-US': ''
	},
	'Selecionar todas as sentenças': {
		'en-US': ''
	},
	'Deselecionar todas as sentenças': {
		'en-US': ''
	},
	'A correção em lote permite modificar todas ou parte das sentenças do corpus com um script escrito na sintaxe do <a target="_blank" href="../../cgi-bin/expressoes_5.cgi">critério 5: Python</a>.': {
		'en-US': ''
	},
	'Baixe o <a href="../../interrogar-ud/scripts/modelo_script.txt" target="_blank" download="">modelo de script de correção</a> em Python.': {
		'en-US': ''
	},
	'Todas as sentenças voltarão para a busca inicial': {
		'en-US': ''
	},
	'Retornar esta sentença para a busca inicial': {
		'en-US': ''
	},
	'Clique para mostrar a anotação': {
		'en-US': ''
	},
	'[Desfazer filtro]': {
		'en-US': ''
	},
	'[Fechar página]': {
		'en-US': ''
	},
	'Busca inicial:': {
		'en-US': ''
	},
	'Fechar': {
		'en-US': ''
	},
	'Relatório gerado dia': {
		'en-US': ''
	},
	'Busca:': {
		'en-US': ''
	},
	'Quantidade de ocorrências:': {
		'en-US': ''
	},
	'Quantidade de': {
		'en-US': ''
	},
	'Busca salva em': {
		'en-US': ''
	},
	'frequência': {
		'en-US': ''
	},
	'Wiki - documentação das ferramentas': {
		'en-US': 'Wiki - documentation for our tools'
	},
	'Dependentes sintáticos': {
		'en-US': 'Syntactic children'
	},
	'dependentes': {
		'en-US': 'children'
	},
	'Nova função: visualizar distribuição dos dependentes sintáticos': {
		'en-US': 'New feature: view syntactic children distribution'
	}
};

function updateTranslation(){
    $('.translateHtml').each(function(){
        if (translations[$(this).html()]) {
            if (userLang == "pt-BR") {
                if (translations[$(this).html()]["pt-BR"]) {
                    $(this).html(translations[$(this).html()]["pt-BR"]);
                }
            } else {
                if (translations[$(this).html()]["en-US"]) {
                    $(this).html(translations[$(this).html()]["en-US"]);
                }
            };
        };
    });
    $('.translateVal').each(function(){
        if (translations[$(this).attr("value")]) {
            if (userLang == "pt-BR") {
                if (translations[$(this).attr("value")]["pt-BR"]) {
                    $(this).attr("value", translations[$(this).attr("value")]["pt-BR"]);
                }
            } else {
                if (translations[$(this).attr("value")]["en-US"]) {
                    $(this).attr("value", translations[$(this).attr("value")]["en-US"]);
                }
            };
        };
    });
    $('.translateTitle').each(function(){
        if (translations[$(this).attr("title")]) {
            if (userLang == "pt-BR") {
                if (translations[$(this).attr("title")]["pt-BR"]) {
                    $(this).attr("title", translations[$(this).attr("title")]["pt-BR"]);
                }
            } else {
                if (translations[$(this).attr("title")]["en-US"]) {
                    $(this).attr("title", translations[$(this).attr("title")]["en-US"]);
                }
            };
        };
    });
    $('.translateLabel').each(function(){
        if (translations[$(this).attr("label")]) {
            if (userLang == "pt-BR") {
                if (translations[$(this).attr("label")]["pt-BR"]) {
                    $(this).attr("label", translations[$(this).attr("label")]["pt-BR"]);
                }
            } else {
                if (translations[$(this).attr("label")]["en-US"]) {
                    $(this).attr("label", translations[$(this).attr("label")]["en-US"]);
                }
            };
        };
    });
};

function loadingScreen(){
    $('#loading-bg').show();
    $('#loading-image').show();
};

function endLoadingScreen(){
    $('#loading-bg').hide();
    $('#loading-image').hide();
};

$(window).on('beforeunload', function() {
    loadingScreen();
    $('.indexSentences').val('0');
    $('.filtrado').val('0');
    setTimeout(waitTooMuch, 20000);
});

function enviar() {
    $('[class=field]').each(function(i){
        if ($(this).val() == $('#' + $(this).attr('name')).text().replace("<br>", '').replace('</div>', '').replace('<div>', '')) {
            this.remove();
        } else {
            $(this).val($('#' + $(this).attr('name')).text().replace("<br>", '').replace('</div>', '').replace('<div>', ''));
        }
    });
    document.getElementById('dados_inquerito').submit();
};

function encodeUrl(s){
    return s
        .replace(/ /g, '%20')
        .replace(/#/g, '%23')
        .replace(/\$/g, '%24')
        .replace(/&/g, "%26")
        .replace(/@/g, "%40")
        .replace(/`/g, "%60")
        .replace(/\//g, "%2F")
        .replace(/:/g, "%3A")
        .replace(/;/g, "%3B")
        .replace(/</g, "%3C")
        .replace(/=/g, "%3D")
        .replace(/>/g, "%3E")
        .replace(/\?/g, "%3F")
        .replace(/\[/g, "%5B")
        .replace(/\\/g, "%5C")
        .replace(/]/g, "%5D")
        .replace(/\^/g, "%5E")
        .replace(/{/g, "%7B")
        .replace(/\|/g, "%7C")
        .replace(/}/g, "%7D")
        .replace(/~/g, "%7E")
        .replace(/\"/g, "%22")
        .replace(/'/g, "%27")
        .replace(/\+/g, "%2B")
        .replace(/,/g, "%2C");
};

function waitTooMuch(){
    if ($('.toggleSalvar').length){
        if ($('#loading-bg').is(':visible')){
            if (/interrogar\.cgi/.test(window.location.href)) {
                if (!$('.toggleSalvar').is(':checked')) {
                    $('#loading-bg').append('<div style="width: 30vw; font-weight:500; margin:60vh auto;">Caso a busca esteja demorando muito, você pode optar por <a href=\'../cgi-bin/interrogar.cgi?corpus=' + $('.conllu').val() + '&save=True&go=True&params=' + encodeUrl($('.pesquisa').val()) + '\'>salvar a busca</a> e ela aparecerá na página de interrogações recentes quando concluir, mesmo que você feche esta página.')
                } else {
                    $('#loading-bg').append('<div style="width: 30vw; font-weight:500; margin:60vh auto;">Caso a busca esteja demorando muito, você pode <a href="javascript:window.close()">fechar esta página</a> ou acompanhar o progresso na página de <a href="../cgi-bin/interrogatorio.cgi">interrogações recentes</a>.</div>');
                }
            }
        }}
};

$(window).on('unload', function() {
    endLoadingScreen();
});

$(window).ready(function(){
    endLoadingScreen();
});

function pesquisaChange(){
    $('.queryString').hide();
    $('.normalQuery').show();
    if ($("#pesquisa").val()){
        $('.clearPesquisa').show();
    } else {
        $('.clearPesquisa').hide();
    };
    if ($('.toggleDist').is(':checked')) {
        if (/(^5 )|( == )|( = )|( != )|( !== )/.test($('#pesquisa').val())) {
            $('.dist').show();
            $('.notDist').hide();
        } else {
            $('.dist').hide();
            $('.notDist').show();
        };
    };
};

function pesquisa(numero) {
    document.getElementById('pesquisa').value = document.getElementById(numero).innerHTML.replace(/&amp;/g, '&').replace(/&gt;/g, '>');
    pesquisaChange();
};

$(document).on('keydown', function(e){
    if (e.key === "Escape") {
        $('.endInquerito').click();
    }
});

function carregarPosts(){
    $(window).unbind('scroll');
    $("title").text("Carregando | " + $("title").text());
    var url;
    if ($('[name=nome_interrogatorio]').val() == 'Busca rápida'){
        url = '../cgi-bin/api.py'
    } else {
        url = '../../cgi-bin/api.py'
    };
    $.post(url, {
            'indexSentences': $('.indexSentences').val(),
            'filtrado': $('.filtrado').val(),
            'nomePesquisa': $('[name=nome_interrogatorio]').val(),
            'html': $('[name=link_interrogatorio]').val(),
            'conllu': $('[name=conllu]').val(),
            'parametros': $('#expressao').text(),
            'script': $('[name=queryScript]').val(),
        },
        function(data) {
            if ($("title").text().indexOf("Carregando | ") !== -1){
                $("title").text($("title").text().split("Carregando | ")[1]);
            };
            $('.loadSentences').append(JSON.parse(data).html);
            $('.indexSentences').val(JSON.parse(data).indexSentences);
            $('.filtrado').val(JSON.parse(data).filtrado);
            $('.filtrar_filtros').html(JSON.parse(data).filtrar_filtros);
            if (JSON.parse(data).pagina_filtros.length) {
                $('.pagina_filtros').html('<li><h4>Filtros (' + JSON.parse(data).filtros +  '):</h4></li>' + JSON.parse(data).pagina_filtros);
            } else {
                $('.pagina_filtros_br').remove();
            };
            if (JSON.parse(data).noMore == true){
                $('#loadingGif').attr("src", "");
                $('#statusLoading').html(':(');
                $('#loadingText').html('acabaram as sentenças');
            } else { scrollPosts(); };
            $('.cb').unbind('click');
            $('.metadados_sentence').unbind('click');
            $('.cb').click(function(event){
                event.preventDefault;
                $(this).prop("checked", !$(this).prop("checked"));
            });
            $('.metadados_sentence').click(function(){
                $(this).find('.cb').prop("checked", !$(this).find('.cb').prop("checked"));
			});
			updateTranslation();
        },
        "text",
    );
};

function scrollPosts(){
    $(window).scroll(function() {    
        if($(window).scrollTop() + $(window).height() > $(document).height() -5000) {
            $(window).unbind('scroll');
            carregarPosts();
        };
    });
};

var userLang = navigator.language || navigator.userLanguage;

$(document).ready(function(){

    updateTranslation();

    $('.toggleCriteria').click(function(){
        $('.criterio').hide();
        $('#criterio_' + $(this).attr('criterio')).show();
    });

    $('.exportHtml').click(function(){
        if ($('[name=nome_interrogatorio]').val() == 'Busca rápida'){
            url = '../cgi-bin/export_html.py'
        } else {
            url = '../../cgi-bin/export_html.py'
        };
        window.open(url + "?corpus=" + corpus.innerHTML + "&params=" + encodeURIComponent($('#expressao').text()) + "&html=" + $('[name=link_interrogatorio]').val() + "&nome=" + $('[name=nome_interrogatorio]').val().replace(/#/%23), "_blank");
    });

    if($('#expressao').length){
        carregarPosts();
    };

    $('.desfazerFiltro').click(function(){
        if (confirm('Todos os filtros posteriores ao "' + $(this).attr('nomeFiltro') +  '" serão apagados também. Continuar?')){
            window.location = $(this).attr('link');
        }
    });

    $('.tablinks').click(function(){
        $('.tablinks').css('background-color', 'transparent');
        $('.filterDiv').hide();
        $('#script').hide();
        $('.selectSome').hide();
        $('.inqueritoSome').hide();
        $('.viewDist').hide();
        if ($('.tab' + $(this).attr('tab')).is(":visible")){
            $('.tab' + $(this).attr('tab')).hide();
        } else {
            $(this).css('background-color', 'lightgray');
            $('.tabcontent').hide();
            $('#' + $(this).attr('tabid')).show();
        };
    });

    $('.filterAnchor').click(function(){
        $('.filterDiv').hide();
        $('.' + $(this).attr('tab')).show();
    });

    $('[tab=newSearchFilter]').click(function(){
        $('#pesquisa_filtro').focus();
    });

    $('[tab=selectionFilter]').click(function(){
        $('#nome_pesquisa_sel').focus();
    });

    $lastDistribution = "";

    $('.toggleSalvar, .toggleRapida').click(function(){
        $('#enviar').val($(this).attr('label'));
    });

    $('.sendInterrogar').on('submit', function(event){
        if (! $('#enviar').is(":visible")){
            event.preventDefault();
            if ($lastDistribution){
                if ($('.dist').is(':visible')){
                    $lastDistribution.click();
                };
            };
        };
    });

    $('.addCondition').click(function(){
        if ($('#pesquisa').val()){
          $('#pesquisa').val($('#pesquisa').val() + ' and ');
        };
        $('#pesquisa').val($('#pesquisa').val() + $('.token').val() + "." + $('.atribute').val() + " " + $('.evaluation').val() + ' "' + $('.value').val() + '"');
        $('.value').val('');
        $('.pesquisa').focus();
        pesquisaChange();
    });

    $('.addBoldCondition').click(function(){
        if ($('#pesquisa').val()){
          $('#pesquisa').val($('#pesquisa').val() + ' and ');
        };
        $('#pesquisa').val($('#pesquisa').val().replace(/\s@/g, " "));
        $('#pesquisa').val($('#pesquisa').val() + "@" + $('.token').val() + "." + $('.atribute').val() + " " + $('.evaluation').val() + ' "' + $('.value').val() + '"');
        $('.value').val('');
        $('.pesquisa').focus();
        pesquisaChange();
    });

    $('.clearCondition, .clearPesquisa').click(function(){
        $('#pesquisa').val('');
        pesquisaChange();
    });

    $('.value').keydown(function(event){
        if (event.which == 13 || event.keyCode == 13) {
            event.preventDefault();
            $('.addCondition').click();
        };
    });

    $('.evaluation').change(function(){
        if ($('.evaluation').val() == '=='){
            $('.ade').html(' a ');
        } else {
            $('.ade').html(' de ');
        };
    });

    $('#pesquisa').on('keyup', function(){pesquisaChange()});

    $('.toggleDist').on('click', function(){
        if (/(^5 )|( == )|( = )|( != )|( !== )|( !=== )/.test($('#pesquisa').val())) {
            $('.dist').show();
            $('.notDist').hide();
        } else {
            $('.dist').hide();
            $('.notDist').show();
        }
    });

    $('.toggle:checked').click();

    $('.verDist').click(function(){
        if ($('#pesquisa').length){
            $('#html_dist').val($('#pesquisa').val().replace(/^5 /, ""));
            $('#expressao_dist').val($('#pesquisa').val());
            $('#corpus_dist').val($('.conllu').val());
            $lastDistribution = $(this);
            $('.verDist').css('color', '');
            $(this).css('color', 'rgba(255,105,30,1)');
        };
        dist($(this).html());
    });

    if($('.drag').length){

        $('.drag').draggable({
            zIndex: 100,
            revert: true,
            opacity: 0.35,
            appendTo: "body",
            refreshPositions: true,
        },);
    };
      
    if ($('.drag').length){
        $('tr').droppable({
            hoverClass: "drop-hover",
            drop: function(event, ui) {
                var classes = ui.draggable.attr('class');
                if ($(this).children('.id').html() != ui.draggable.siblings(".id").html()){
                    ui.draggable.html($(this).children('.id').html());
                };
            }
        });
    };

    $(document).on('keydown', function(event){
        if ((event.keyCode == 10 || event.keyCode == 13) && event.ctrlKey) {
            event.preventDefault();
            $('#sendAnnotation').click();
        };
    });

    $('.notPipe').click(function(){
        document.execCommand('selectAll');
    });

    $('.annotationValue').on('keydown', function(event){
        $td = $(this);
        if (event.keyCode == 38) {
            event.preventDefault();
            $linha = parseInt($td.attr('id').split("-")[0]) - 1;
            $coluna = $td.attr('id').split("-")[1];
            $('#' + $linha + '-' + $coluna).focus();
        };

        if (event.keyCode == 40) {
            event.preventDefault();
            $linha = parseInt($td.attr('id').split("-")[0]) + 1;
            $coluna = $td.attr('id').split("-")[1];
            $('#' + $linha + '-' + $coluna).focus();
        };
    });

});


function dist(coluna){
    if (! $('#pesquisa').length){
        document.getElementById("corpus_dist").value = document.getElementById("corpus").innerHTML
        document.getElementById("expressao_dist").value = $("#expressao").text()
        document.getElementById("link_dist").value = document.getElementsByName("link_interrogatorio")[0].value
        document.getElementById("combination_dist").value = document.getElementById("combination").innerHTML
    }
    document.getElementById("coluna_dist").value = coluna
    $("#dist").submit()
}

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("myBtn").style.display = "block";
  } else {
    document.getElementById("myBtn").style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}

function excluir_selection() {
    
    $('#pesquisa_filtro').val("1 ");
    $(".cb:checked").each(function(){
        $('#pesquisa_filtro').val($('#pesquisa_filtro').val() + '(\\s' + escapeRegExp($(this).attr('sent_id')) + '$)|');
    });
    $('#pesquisa_filtro').val($('#pesquisa_filtro').val().rsplit('|', 1)[0] + '');
    /**for (i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked == true) {
            if (document.getElementById("text_" + checkboxes[i].id.split(/_/)[1]).innerHTML.indexOf("<b>") !== -1){
                negrito = document.getElementById("text_" + checkboxes[i].id.split(/_/)[1]).innerHTML.substring(document.getElementById("text_" + checkboxes[i].id.split(/_/)[1]).innerHTML.indexOf('<b>')).split(/<\/b>/)[0].replace(/<.*?>/g, '');
            } else { negrito = ""; };
            document.getElementById("pesquisa_filtro").value = document.getElementById("pesquisa_filtro").value + "^# text = " + escapeRegExp(document.getElementById("text_" + checkboxes[i].id.split('_')[1]).innerHTML.replace(/<.*?>/g, '')) + "$|";
        };
    };**/

    if (document.getElementById("nome_pesquisa_sel").value == "") {
    	var data = new Date().toLocaleString()
        document.getElementById("nome_pesquisa_sel").value = "Seleção " + data;
    };

    document.getElementById("nome_pesquisa").value = document.getElementById("nome_pesquisa_sel").value;
    document.getElementById("filtrar").click();
}

function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\/]/g, '\\$&').replace('&amp;', '.'); // $& means the whole matched string
}

String.prototype.rsplit = function(sep, maxsplit) {
    var split = this.split(sep);
    return maxsplit ? [ split.slice(0, -maxsplit).join(sep) ].concat(split.slice(-maxsplit)) : split;
}

function filtraragora(n) {
    var checkboxes, i;
    checkboxes = document.getElementsByClassName("cb");

    for (i = 0; i < checkboxes.length; i++) {
        checkboxes[i].checked = false;
    }

    document.getElementById("checkbox_" + n).checked = true;
    document.getElementById("filtrarsel").click();
}

function tudo(event) {
    var checkboxes, i, anotacoes;
    checkboxes = document.getElementsByClassName("cb");
    anotacoes = document.getElementsByClassName("anotacao");

    if (event == "marcar"){
        for (i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = true;
        }
    }

    if (event == "desmarcar"){
        for (i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = false;
        }
    }

    if (event == "abrir") {
        for (i = 0; i < anotacoes.length; i++) {
            if (anotacoes[i].value == "Mostrar anotação") {
                anotacoes[i].click();
            }
        }
    }

    if (event == "fechar") {
        for (i = 0; i < anotacoes.length; i++) {
            if (anotacoes[i].value == "Esconder anotação") {
                anotacoes[i].click();
            }
        }
    }

}

function mostrar(nome, botao) {
    if (document.getElementById(nome).style.display == "none"){
        document.getElementById(nome).style.display = "block"
        document.getElementById(botao).value = "Esconder anotação"
    } else {
        document.getElementById(nome).style.display = "none"
        document.getElementById(botao).value = "Mostrar anotação"
    }
}

function mostraropt(nome, botao) {
    if (document.getElementById(nome).style.display == "none"){
        document.getElementById(nome).style.display = "block"
        document.getElementById(botao).value = "Esconder opções"
    } else {
        document.getElementById(nome).style.display = "none"
        document.getElementById(botao).value = "Mostrar opções"
    }
}

function contexto(sent_id, id, corpus) {
    var url;
    if ($('[name=nome_interrogatorio]').val() == 'Busca rápida'){
        url = '../cgi-bin/contexto.py';
    } else {
        url = '../../cgi-bin/contexto.py';
    };
    window.open(url + "?id=" + id + "&sent_id=" + sent_id + "&corpus=" + corpus, "_blank"); 
}

function apagar() {
    if (confirm('Apagar interrogação "' + document.getElementById("combination").innerHTML.replace('&lt;', '<').replace('&gt;', '>') + '"?')) {
        window.location = "../cgi-bin/apagar.cgi?query=" + document.getElementById("apagar_link").value;
    }
}

function openCity(evt, cityName) {
    // Declare all variables
    var i, tabcontent, tablinks;

    // Get all elements with class="tabcontent" and hide them
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

    // Get all elements with class="tablinks" and remove the class "active"
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }

    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";

    document.getElementById("fechartabs").style.display = "block"
}

function fechar_tabs() {
    var tablinks, i, tabcontent;

	tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }

	document.getElementById('fechartabs').style.display = "none";

	tablinks = document.getElementById("tablinks");
	for (i = 0; i < tablinks.length; i++) {
           tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
}

function inquerito(ide) {
    document.getElementById(ide).submit()
}

function anotarudpipe(ide) {
    document.getElementById(ide).submit()
}

function drawtree(ide) {
    document.getElementById(ide).submit()
}

//function load() {
    //url = new URL(window.location.href);
    //if (url.searchParams.get('page') == 'hide') {
        //$('#easyPaginate').easyPaginate({
            //paginateElement: 'nadanao',
        //});
    //} else {
        //$('#easyPaginate').easyPaginate({
            //paginateElement: '.container',
            //elementsPerPage: 10,
            //firstButton: false,
            //lastButton: false,
            ////prevButton: true,
            //nextButton: true,
        //});
    //}
//}

function paginacao() {
    if (window.location.href.indexOf("?page=hide") != -1){
        window.location = window.location.pathname;
    } else {
        window.location = "?page=hide";
    }
}
